
<html>
	<head>

		<link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/css/ol.css">
		<style>
	      .map {
	        height: 400px;
	        width: 100%;
	      }
	    </style>
	    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.3.0/build/ol.js"></script>
	    <title>OpenLayers example</title>
    </head>	
	  <body>
	    <h2>Volta del general</h2>
	    <div id="map" class="map"></div>
	    <script type="text/javascript">

			// primero creamos una view, la centramos y le metemos el zoom que queremos

			var vista = new ol.View({
	        	center: ol.proj.fromLonLat([2.5338, 39.6951]),
	        	zoom: 15
	        });

			// Nuestra capa base será un mapa OSM del mapamundi

			var capa_base = new ol.layer.Tile({
	       		source: new ol.source.OSM()
	    	});

			// Creamos nuestro mapa y le metemos la capa del mapamundi
				
		   	var map = new ol.Map({
		        target: 'map',
		        layers: [ capa_base ],
		        view: vista
		    });
      		
		   	// Vamos a crear una segunda capa en la que incluiremos los POIs (point of interest)
		   	// Hay que transformar las coordenadas porque sino no va

		   	var coordinate = ol.proj.transform([2.52145, 39.69000], 'EPSG:4326', 'EPSG:3857');
			var coordinate2 = ol.proj.transform([2.55049, 39.69944], 'EPSG:4326', 'EPSG:3857');

		   	// Creamos una característica que contenga un punto en donde queremos

		   	var pointFeature 	= new ol.Feature(		   		
		   		new ol.geom.Point(coordinate)
		   	);

			var pointFeature2 	= new ol.Feature(		   		
		   		
		   		new ol.geom.Point(coordinate2)
		   	);
					
		 	// Esto es el icono que quería poner como marcador. La cosa es que da problemas
		 	// Al hacer zoom in y out se va donde le da la gana. Lo he cambiado por un círculo. No se llega a usar

			var icono = new ol.style.Icon ({
		                anchor: [0.5, 46],
		                anchorXUnits: 'fraction',
		                anchorYUnits: 'pixels',
		                opacity: 0.95,
		                src: 'img/Ol_icon_blue_example.png'
              		});

			// Vamos a hacer un circulito con relleno negro y borde blanco
			// Creamos las propiedades

			var relleno = new ol.style.Fill({
	                color: 'rgba(255, 255, 255, 0.6)'
	                });

			var trazo = new ol.style.Stroke({
				width: 3,
				color: [255, 0, 0, 1]
			});

			// Creamos el círculo

			var circulo = new ol.style.Circle({
	            radius: 7,
	            fill: new ol.style.Fill({ color: 'black'}),
	            stroke: new ol.style.Stroke({ color: 'white', width: 2  })
            });

            // Creamos un estilo

			var circulo_negro = new ol.style.Style({
              		image: circulo,
	            	stroke: trazo,
	              	fill: relleno
            	});

			// Creamos un layer y la añadimos al mapa
			
			var vectorSource = new ol.source.Vector({
				features: [ pointFeature
				, pointFeature2 
				]
			});



			var vl = new ol.layer.Vector({
				source: vectorSource,
				style:  circulo_negro
			});


			map.addLayer(vl);


	    </script>
	  </body>


</html>

